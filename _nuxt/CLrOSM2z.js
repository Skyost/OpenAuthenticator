import{F as H,d as L,C as B,T as O,D as M,E as C,s as R,w as h,a6 as U,J as N,c as V,a0 as q,a7 as w,a8 as P,g as D,o as _,m as S,n as G,h as s,a9 as J,aa as K,G as Q,a4 as W,x as X,ab as g,f as Y,b as z,e as E,N as x,a as Z,S as ee,j as ae,t as le,ac as te}from"./C5ok3CSj.js";import{_ as oe}from"./C4d-cLHj.js";function j(p){return p.map(y=>y.type===H?j(y.children):y).flat()}const ue=["aria-expanded","aria-controls","onClick"],ie=L({inheritAttrs:!1,__name:"BAccordionItem",props:B({bodyAttrs:{default:void 0},bodyClass:{default:void 0},buttonAttrs:{default:void 0},buttonClass:{default:void 0},collapseClass:{default:void 0},headerAttrs:{default:void 0},headerClass:{default:void 0},headerTag:{default:"h2"},horizontal:{type:Boolean,default:void 0},id:{default:void 0},isNav:{type:Boolean,default:void 0},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1},tag:{default:void 0},title:{default:void 0},show:{type:Boolean,default:void 0},visible:{type:Boolean,default:!1},wrapperAttrs:{default:void 0}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:B(["hide","hide-prevented","hidden","show","show-prevented","shown","toggle","toggle-prevented","cancel","ok"],["update:modelValue"]),setup(p,{emit:y}){const A=J(),r=V(()=>{const{class:f,...e}=A;return{wrapperClass:f,collapseAttrs:e}}),l=M(p,"BAccordionItem"),v=y,u=K(P,null),o=N(()=>l.id,"accordion_item"),d=C(p,"modelValue");d.value?u==null||u.setOpenItem(o.value):d.value=(Array.isArray(u==null?void 0:u.openItem.value)?u==null?void 0:u.openItem.value.includes(o.value):(u==null?void 0:u.openItem.value)===o.value)&&!(u!=null&&u.initialAnimation.value);const b=Q("_el");u==null||u.registerAccordionItem(o.value,b),W(()=>{u==null||u.unregisterAccordionItem(o.value)}),X(()=>{!d.value&&(u==null?void 0:u.openItem.value)===o.value&&g(()=>{d.value=!0})});const I=V(()=>Array.isArray(u==null?void 0:u.openItem.value)?u==null?void 0:u.openItem.value.includes(o.value):(u==null?void 0:u.openItem.value)===o.value);return h(()=>u==null?void 0:u.openItem.value,()=>d.value=I.value),h(d,()=>{d.value&&!I.value?u==null||u.setOpenItem(o.value):!d.value&&I.value&&(u==null||u.setCloseItem(o.value))}),(f,e)=>{var i,n;return _(),D("div",x({ref:"_el",class:"accordion-item"},s(l).wrapperAttrs,{class:r.value.wrapperClass}),[Y(oe,x({id:s(o),modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),class:["accordion-collapse",s(l).collapseClass],"aria-labelledby":`${s(o)}-heading`},r.value.collapseAttrs,{tag:s(l).tag,show:s(l).show,horizontal:s(l).horizontal,visible:s(l).visible,"is-nav":s(l).isNav,lazy:s(l).lazy||((i=s(u))==null?void 0:i.lazy.value),"unmount-lazy":s(l).unmountLazy||((n=s(u))==null?void 0:n.unmountLazy.value),onShow:e[1]||(e[1]=t=>v("show",t)),onShown:e[2]||(e[2]=t=>v("shown",t)),onHide:e[3]||(e[3]=t=>v("hide",t)),onHidden:e[4]||(e[4]=t=>v("hidden",t)),onHidePrevented:e[5]||(e[5]=t=>v("hide-prevented",t)),onShowPrevented:e[6]||(e[6]=t=>v("show-prevented",t)),onTogglePrevented:e[7]||(e[7]=t=>v("toggle-prevented",t)),onToggle:e[8]||(e[8]=t=>v("toggle",t))}),{header:z(({visible:t,toggle:m})=>[(_(),Z(ee(s(l).headerTag),x({id:`${s(o)}-heading`,class:["accordion-header",s(l).headerClass]},s(l).headerAttrs),{default:z(()=>[E("button",x({class:"accordion-button"},s(l).buttonAttrs,{class:[{collapsed:!t},s(l).buttonClass],type:"button","aria-expanded":t?"true":"false","aria-controls":s(o),onClick:m}),[S(f.$slots,"title",{},()=>[ae(le(s(l).title),1)])],16,ue)]),_:2},1040,["id","class"]))]),default:z(()=>[E("div",x({class:"accordion-body"},s(l).bodyAttrs,{class:s(l).bodyClass}),[S(f.$slots,"default")],16)]),_:3},16,["id","modelValue","class","aria-labelledby","tag","show","horizontal","visible","is-nav","lazy","unmount-lazy"])],16)}}}),ne=["id"],de=L({__name:"BAccordion",props:B({flush:{type:Boolean,default:!1},free:{type:Boolean,default:!1},id:{default:void 0},initialAnimation:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1}},{modelValue:{default:void 0},modelModifiers:{},index:{default:void 0},indexModifiers:{}}),emits:["update:modelValue","update:index"],setup(p){const y=p,A=O(),r=M(y,"BAccordion"),a=C(p,"modelValue"),l=C(p,"index"),v=R([]),u=()=>{var e;const i=j(((e=A.default)==null?void 0:e.call(A,{}))??[]);v.value=(Array.isArray(i)?i:[i]).filter(n=>n.type===ie)};u(),h(()=>{var e;return(e=A.default)==null?void 0:e.call(A,{})},()=>{u(),g(()=>{d()})});const o=U([]),d=()=>{var e;if(o.value=o.value.sort((i,n)=>te(s(i.el),s(n.el))),a.value)if(Array.isArray(a.value)){const i=a.value.map(n=>o.value.findIndex(t=>t.id===n)).filter(n=>n!==-1);i.length,a.value.length,l.value=i}else{const i=o.value.findIndex(n=>n.id===a.value);i!==-1&&(l.value=i)}else l.value!==void 0&&(a.value=Array.isArray(l.value)?l.value.map(i=>{var n;return(n=o.value[i])==null?void 0:n.id}):(e=o.value[l.value])==null?void 0:e.id)},b=N(()=>r.id,"accordion"),I=V(()=>({"accordion-flush":r.flush})),f=(e,i)=>Array.isArray(e)&&Array.isArray(i)?e.length===i.length&&e.every((n,t)=>n===i[t]):e===i;return h(()=>l.value,(e,i)=>{var n,t,m,T,$;if(!f(e,i)){if(l.value===void 0){a.value=void 0;return}if(r.free)if(Array.isArray(l.value)){const c=l.value.map(F=>{var k;return(k=o.value[F])==null?void 0:k.id});f(c,a.value)||(a.value=c)}else{const c=($=o.value[l.value])==null?void 0:$.id;if(c===void 0){g(()=>{l.value=void 0});return}f(c,a.value)||(a.value=c)}else{const c=Array.isArray(l.value)?(n=l.value)==null?void 0:n[0]:l.value;(t=o.value[c])!=null&&t.id?a.value!==((m=o.value[c])==null?void 0:m.id)&&(a.value=(T=o.value[c])==null?void 0:T.id):g(()=>{l.value=void 0})}}}),h(()=>a.value,(e,i)=>{if(!f(e,i)){if(a.value===void 0){l.value=void 0;return}if(r.free){if(r.free)if(Array.isArray(a.value)){const n=a.value.map(t=>o.value.findIndex(m=>m.id===t)).filter(t=>t!==-1);n.length>0?f(n,l.value)||(l.value=n):g(()=>{a.value=void 0})}else{const n=o.value.findIndex(t=>t.id===a.value);f(n,l.value)||(l.value=n)}}else{const n=Array.isArray(a.value)?o.value.findIndex(t=>{var m;return t.id===((m=a.value)==null?void 0:m[0])}):o.value.findIndex(t=>t.id===a.value);n!==-1?l.value!==n&&(l.value=n):g(()=>{a.value=void 0})}}},{deep:!0}),h(()=>r.free,e=>{a.value&&(!e&&Array.isArray(a.value)?a.value=a.value[0]:e&&!Array.isArray(a.value)&&(a.value=[a.value]))}),q(P,{openItem:w(()=>a.value),free:w(()=>r.free),initialAnimation:w(()=>r.initialAnimation),lazy:w(()=>r.lazy),unmountLazy:w(()=>r.unmountLazy),setOpenItem:e=>{if(r.free&&!Array.isArray(a.value)){a.value!==void 0?a.value=[a.value,e]:a.value=[e];return}if(!r.free&&Array.isArray(a.value)){a.value=e;return}Array.isArray(a.value)?a.value.includes(e)||(a.value=[...a.value,e]):a.value=e},setCloseItem:e=>{if(!r.free&&Array.isArray(a.value)){a.value=void 0;return}if(Array.isArray(a.value)){const i=a.value.filter(n=>n!==e);a.value=i.length?i:void 0}else a.value===e&&(a.value=void 0)},registerAccordionItem:(e,i)=>{o.value=[...o.value,{id:e,el:i}],o.value.length===v.value.length&&d()},unregisterAccordionItem:e=>{o.value=o.value.filter(i=>i.id!==e)}}),(e,i)=>(_(),D("div",{id:s(b),class:G(["accordion",I.value])},[S(e.$slots,"default")],10,ne))}});export{de as _,ie as a};
