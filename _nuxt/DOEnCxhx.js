import{F as P,d as k,B,C as E,W as D,D as z,q as F,w as y,a8 as H,K as S,c as C,N as O,a3 as h,as as T,g as L,o as b,l as V,n as R,h as s,at as j,G as q,E as K,a7 as U,v as _,ap as p,f as G,b as x,e as $,Q as I,a as Q,V as W,i as J,t as X}from"./CSzvWO1r.js";import{_ as Y}from"./5WiDjVsJ.js";import{s as Z}from"./BOJtGntZ.js";function M(c){return c.map(m=>m.type===P?M(m.children):m).flat()}const ee=["aria-expanded","aria-controls","onClick"],ae=k({inheritAttrs:!1,__name:"BAccordionItem",props:B({bodyAttrs:{default:void 0},bodyClass:{default:void 0},buttonAttrs:{default:void 0},buttonClass:{default:void 0},collapseClass:{default:void 0},headerAttrs:{default:void 0},headerClass:{default:void 0},headerTag:{default:"h2"},horizontal:{type:Boolean,default:void 0},id:{default:void 0},isNav:{type:Boolean,default:void 0},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1},tag:{default:void 0},title:{default:void 0},show:{type:Boolean,default:void 0},visible:{type:Boolean,default:!1},wrapperAttrs:{default:void 0}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:B(["hide","hide-prevented","hidden","show","show-prevented","shown","toggle","toggle-prevented","cancel","ok"],["update:modelValue"]),setup(c,{emit:m}){const u=E(c,"BAccordionItem"),a=m,i=j(),A=C(()=>{const{class:f,...e}=i;return{wrapperClass:f,collapseAttrs:e}}),r=q(T,null),t=S(()=>u.id,"accordion_item"),d=z(c,"modelValue");d.value?r?.setOpenItem(t.value):d.value=(Array.isArray(r?.openItem.value)?r?.openItem.value.includes(t.value):r?.openItem.value===t.value)&&!r?.initialAnimation.value;const w=K("_el");r?.registerAccordionItem(t.value,w),U(()=>{r?.unregisterAccordionItem(t.value)}),_(()=>{!d.value&&r?.openItem.value===t.value&&p(()=>{d.value=!0})});const g=C(()=>Array.isArray(r?.openItem.value)?r?.openItem.value.includes(t.value):r?.openItem.value===t.value);return y(()=>r?.openItem.value,()=>d.value=g.value),y(d,()=>{d.value&&!g.value?r?.setOpenItem(t.value):!d.value&&g.value&&r?.setCloseItem(t.value)}),(f,e)=>(b(),L("div",I({ref:"_el",class:"accordion-item"},s(u).wrapperAttrs,{class:A.value.wrapperClass}),[G(Y,I({id:s(t),modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),class:["accordion-collapse",s(u).collapseClass],"aria-labelledby":`${s(t)}-heading`},A.value.collapseAttrs,{tag:s(u).tag,show:s(u).show,horizontal:s(u).horizontal,visible:s(u).visible,"is-nav":s(u).isNav,lazy:s(u).lazy||s(r)?.lazy.value,"unmount-lazy":s(u).unmountLazy||s(r)?.unmountLazy.value,onShow:e[1]||(e[1]=l=>a("show",l)),onShown:e[2]||(e[2]=l=>a("shown",l)),onHide:e[3]||(e[3]=l=>a("hide",l)),onHidden:e[4]||(e[4]=l=>a("hidden",l)),onHidePrevented:e[5]||(e[5]=l=>a("hide-prevented",l)),onShowPrevented:e[6]||(e[6]=l=>a("show-prevented",l)),onTogglePrevented:e[7]||(e[7]=l=>a("toggle-prevented",l)),onToggle:e[8]||(e[8]=l=>a("toggle",l))}),{header:x(({visible:l,toggle:o})=>[(b(),Q(W(s(u).headerTag),I({id:`${s(t)}-heading`,class:["accordion-header",s(u).headerClass]},s(u).headerAttrs),{default:x(()=>[$("button",I({class:"accordion-button"},s(u).buttonAttrs,{class:[{collapsed:!l},s(u).buttonClass],type:"button","aria-expanded":l?"true":"false","aria-controls":s(t),onClick:o}),[V(f.$slots,"title",{},()=>[J(X(s(u).title),1)])],16,ee)]),_:2},1040,["id","class"]))]),default:x(()=>[$("div",I({class:"accordion-body"},s(u).bodyAttrs,{class:s(u).bodyClass}),[V(f.$slots,"default")],16)]),_:3},16,["id","modelValue","class","aria-labelledby","tag","show","horizontal","visible","is-nav","lazy","unmount-lazy"])],16))}}),le=["id"],ie=k({__name:"BAccordion",props:B({flush:{type:Boolean,default:!1},free:{type:Boolean,default:!1},id:{default:void 0},initialAnimation:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1}},{modelValue:{default:void 0},modelModifiers:{},index:{default:void 0},indexModifiers:{}}),emits:["update:modelValue","update:index"],setup(c){const n=E(c,"BAccordion"),u=D(),a=z(c,"modelValue"),i=z(c,"index"),A=F([]),r=()=>{const e=M(u.default?.({})??[]);A.value=(Array.isArray(e)?e:[e]).filter(l=>l.type===ae)};r(),y(()=>u.default?.({}),()=>{r(),p(()=>{d()})});const t=H([]),d=()=>{if(t.value=t.value.sort((e,l)=>Z(s(e.el),s(l.el))),a.value)if(Array.isArray(a.value)){const e=a.value.map(l=>t.value.findIndex(o=>o.id===l)).filter(l=>l!==-1);e.length,a.value.length,i.value=e}else{const e=t.value.findIndex(l=>l.id===a.value);e!==-1&&(i.value=e)}else i.value!==void 0&&(a.value=Array.isArray(i.value)?i.value.map(e=>t.value[e]?.id):t.value[i.value]?.id)},w=S(()=>n.id,"accordion"),g=C(()=>({"accordion-flush":n.flush})),f=(e,l)=>Array.isArray(e)&&Array.isArray(l)?e.length===l.length&&e.every((o,v)=>o===l[v]):e===l;return y(()=>i.value,(e,l)=>{if(!f(e,l)){if(i.value===void 0){a.value=void 0;return}if(n.free)if(Array.isArray(i.value)){const o=i.value.map(v=>t.value[v]?.id);f(o,a.value)||(a.value=o)}else{const o=t.value[i.value]?.id;if(o===void 0){p(()=>{i.value=void 0});return}f(o,a.value)||(a.value=o)}else{const o=Array.isArray(i.value)?i.value?.[0]:i.value;t.value[o]?.id?a.value!==t.value[o]?.id&&(a.value=t.value[o]?.id):p(()=>{i.value=void 0})}}}),y(()=>a.value,(e,l)=>{if(!f(e,l)){if(a.value===void 0){i.value=void 0;return}if(n.free){if(n.free)if(Array.isArray(a.value)){const o=a.value.map(v=>t.value.findIndex(N=>N.id===v)).filter(v=>v!==-1);o.length>0?f(o,i.value)||(i.value=o):p(()=>{a.value=void 0})}else{const o=t.value.findIndex(v=>v.id===a.value);f(o,i.value)||(i.value=o)}}else{const o=Array.isArray(a.value)?t.value.findIndex(v=>v.id===a.value?.[0]):t.value.findIndex(v=>v.id===a.value);o!==-1?i.value!==o&&(i.value=o):p(()=>{a.value=void 0})}}},{deep:!0}),y(()=>n.free,e=>{a.value&&(!e&&Array.isArray(a.value)?a.value=a.value[0]:e&&!Array.isArray(a.value)&&(a.value=[a.value]))}),O(T,{openItem:h(()=>a.value),free:h(()=>n.free),initialAnimation:h(()=>n.initialAnimation),lazy:h(()=>n.lazy),unmountLazy:h(()=>n.unmountLazy),setOpenItem:e=>{if(n.free&&!Array.isArray(a.value)){a.value!==void 0?a.value=[a.value,e]:a.value=[e];return}if(!n.free&&Array.isArray(a.value)){a.value=e;return}Array.isArray(a.value)?a.value.includes(e)||(a.value=[...a.value,e]):a.value=e},setCloseItem:e=>{if(!n.free&&Array.isArray(a.value)){a.value=void 0;return}if(Array.isArray(a.value)){const l=a.value.filter(o=>o!==e);a.value=l.length?l:void 0}else a.value===e&&(a.value=void 0)},registerAccordionItem:(e,l)=>{t.value=[...t.value,{id:e,el:l}],t.value.length===A.value.length&&d()},unregisterAccordionItem:e=>{t.value=t.value.filter(l=>l.id!==e)}}),(e,l)=>(b(),L("div",{id:s(w),class:R(["accordion",g.value])},[V(e.$slots,"default")],10,le))}});export{ie as _,ae as a};
